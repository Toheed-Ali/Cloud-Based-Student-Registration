<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Portal</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">üë®‚Äçüè´ Teacher Portal</div>
            <div class="nav-menu">
                <span id="user-name"></span>
                <button class="btn btn-secondary" onclick="api.logout()">Logout</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="success-message" class="alert alert-success hidden"></div>
        <div id="error-message" class="alert alert-error hidden"></div>

        <!-- My Course -->
        <div class="card">
            <div class="card-header">üìö My Course</div>
            <div id="loading-spinner" class="spinner hidden"></div>
            <div id="course-info">
                <p class="text-center" style="color: var(--text-light);">Loading course information...</p>
            </div>
        </div>

        <!-- My Timetable -->
        <div class="card">
            <div class="card-header">üìÖ My Teaching Schedule</div>
            <div id="timetable-content">
                <p class="text-center" style="color: var(--text-light);">Loading timetable...</p>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
        async function init() {
            const auth = checkAuth();
            if (!auth) return;

            const userInfo = getUserInfo();
            document.getElementById('user-name').textContent = userInfo.name;

            loadCourse();
            loadTimetable();
        }

        async function loadCourse() {
            showLoading(true);

            try {
                // Mock data
                const mockCourse = {
                    courseID: 'CS301',
                    courseName: 'Algorithms',
                    semester: 3,
                    enrolledStudents: 45,
                    maxCapacity: 50
                };

                const courseDiv = document.getElementById('course-info');
                courseDiv.innerHTML = `
                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <h3>Course ID</h3>
                            <div class="value" style="font-size: 1.5rem;">${mockCourse.courseID}</div>
                        </div>
                        <div class="stat-card">
                            <h3>Course Name</h3>
                            <div class="value" style="font-size: 1.5rem;">${mockCourse.courseName}</div>
                        </div>
                        <div class="stat-card">
                            <h3>Semester</h3>
                            <div class="value">${mockCourse.semester}</div>
                        </div>
                        <div class="stat-card">
                            <h3>Students</h3>
                            <div class="value">${mockCourse.enrolledStudents}</div>
                        </div>
                    </div>
                `;

            } catch (error) {
                showError('Failed to load course: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        async function loadTimetable() {
            const timetableDiv = document.getElementById('timetable-content');

            // Mock timetable data
            const mockTimetable = `
                <div style="overflow-x: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>9:00-10:30</td>
                                <td>CS301<br><small>Room 101 - Class 3A</small></td>
                                <td></td>
                                <td></td>
                                <td>CS301<br><small>Room 101 - Class 3B</small></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>10:30-12:00</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>13:00-14:30</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>14:30-16:00</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>16:00-17:30</td>
                                <td>CS301<br><small>Room 101 - Lab</small></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="mt-2" style="color: var(--text-light); font-size: 0.875rem;">
                    Total teaching hours: 4.5 hours/week
                </p>
            `;

            timetableDiv.innerHTML = mockTimetable;
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>