<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Management System - Login</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container" style="max-width: 450px; margin-top: 80px;">
        <div class="card">
            <h1 class="text-center" style="margin-bottom: 30px; color: var(--primary-color);">
                University Management System
            </h1>

            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username / Roll Number</label>
                    <input type="text" id="username" class="form-control" required
                        placeholder="Enter username or roll number">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" required placeholder="Enter password">
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    Login
                </button>
            </form>

            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                <p style="text-align: center; color: var(--text-secondary); font-size: 14px;">
                    Sample Credentials:<br>
                    <strong>Admin:</strong> admin / admin123<br>
                    <strong>Student:</strong> 2021-CS-001 / pass123<br>
                    <strong>Teacher:</strong> prof_khan / teach123
                </p>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            showLoading(true);

            try {
                const result = await api.login(username, password);

                if (result.status === 'success') {
                    // Redirect based on role
                    const redirectMap = {
                        'admin': 'admin.html',
                        'teacher': 'teacher.html',
                        'student': 'student.html'
                    };

                    window.location.href = redirectMap[result.role] || 'student.html';
                } else {
                    showAlert('Login failed. Please check your credentials.', 'error');
                }
            } catch (error) {
                showAlert('Login failed: ' + error.message, 'error');
            } finally {
                showLoading(false);
            }
        });
    </script>
</body>

</html>